<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Python: module backend.broadcast_observer</title>
</head><body>

<table class="heading">
<tr class="heading-text decor">
<td class="title">&nbsp;<br><strong class="title"><a href="backend.html" class="white">backend</a>.broadcast_observer</strong></td>
<td class="extra"><a href=".">index</a><br><a href="file:c%3A%5Cusers%5Cwh_20%5Conedrive%5Cdocuments%5Cntu%5Csc2006%5Ccareconnect5%5Ccareconnect-main%5Cbackend%5Cbroadcast_observer.py">c:\users\wh_20\onedrive\documents\ntu\sc2006\careconnect5\careconnect-main\backend\broadcast_observer.py</a></td></tr></table>
    <p><span class="code">Broadcast&nbsp;Observer&nbsp;Service&nbsp;for&nbsp;CareConnect&nbsp;Backend.<br>
&nbsp;<br>
This&nbsp;module&nbsp;implements&nbsp;the&nbsp;Observer&nbsp;pattern&nbsp;for&nbsp;broadcasting<br>
low&nbsp;fulfillment&nbsp;rate&nbsp;notifications&nbsp;to&nbsp;subscribed&nbsp;users.</span></p>
<p>
<table class="section">
<tr class="decor index-decor heading-text">
<td class="section-title" colspan=3>&nbsp;<br><strong class="bigsection">Classes</strong></td></tr>
    
<tr><td class="decor index-decor"><span class="code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></td><td>&nbsp;</td>
<td class="singlecolumn"><dl>
<dt class="heading-text"><a href="abc.html#ABC">abc.ABC</a>(<a href="builtins.html#object">builtins.object</a>)
</dt><dd>
<dl>
<dt class="heading-text"><a href="backend.broadcast_observer.html#IObserver">IObserver</a>
</dt><dd>
<dl>
<dt class="heading-text"><a href="backend.broadcast_observer.html#SubscriptionObserver">SubscriptionObserver</a>
</dt></dl>
</dd>
<dt class="heading-text"><a href="backend.broadcast_observer.html#ISubject">ISubject</a>
</dt><dd>
<dl>
<dt class="heading-text"><a href="backend.broadcast_observer.html#CCFulfilmentSubject">CCFulfilmentSubject</a>
</dt></dl>
</dd>
</dl>
</dd>
</dl>
 <p>
<table class="section">
<tr class="decor title-decor heading-text">
<td class="section-title" colspan=3>&nbsp;<br><a name="CCFulfilmentSubject">class <strong>CCFulfilmentSubject</strong></a>(<a href="backend.broadcast_observer.html#ISubject">ISubject</a>)</td></tr>
    
<tr><td class="decor title-decor" rowspan=2><span class="code">&nbsp;&nbsp;&nbsp;</span></td>
<td class="decor title-decor" colspan=2><span class="code"><a href="#CCFulfilmentSubject">CCFulfilmentSubject</a>(threshold:&nbsp;'float'&nbsp;=&nbsp;0.5)<br>
&nbsp;<br>
Subject&nbsp;for&nbsp;CC&nbsp;fulfillment&nbsp;rate&nbsp;broadcasts.<br>
&nbsp;<br>
Keeps&nbsp;in‑memory&nbsp;list&nbsp;of&nbsp;<a href="#SubscriptionObserver">SubscriptionObserver</a>.<br>
Uses&nbsp;pull&nbsp;model:&nbsp;stores&nbsp;self.<strong>desc</strong>;&nbsp;observers&nbsp;pull&nbsp;with&nbsp;<a href="#CCFulfilmentSubject-get_desc">get_desc</a>().<br>
Thread‑safe&nbsp;with&nbsp;a&nbsp;simple&nbsp;RLock.&nbsp;Suitable&nbsp;for&nbsp;single‑process&nbsp;Flask.<br>&nbsp;</span></td></tr>
<tr><td>&nbsp;</td>
<td class="singlecolumn"><dl><dt>Method resolution order:</dt>
<dd><a href="backend.broadcast_observer.html#CCFulfilmentSubject">CCFulfilmentSubject</a></dd>
<dd><a href="backend.broadcast_observer.html#ISubject">ISubject</a></dd>
<dd><a href="abc.html#ABC">abc.ABC</a></dd>
<dd><a href="builtins.html#object">builtins.object</a></dd>
</dl>
<hr>
Methods defined here:<br>
<dl><dt><a name="CCFulfilmentSubject-__init__"><strong>__init__</strong></a>(self, threshold: 'float' = 0.5)</dt><dd><span class="code">Initialize&nbsp;self.&nbsp;&nbsp;See&nbsp;help(type(self))&nbsp;for&nbsp;accurate&nbsp;signature.</span></dd></dl>

<dl><dt><a name="CCFulfilmentSubject-find"><strong>find</strong></a>(self, user_email: 'str', cc: 'str') -&gt; 'Optional[IObserver]'</dt><dd><span class="code">#&nbsp;---&nbsp;Utilities&nbsp;for&nbsp;routes&nbsp;---</span></dd></dl>

<dl><dt><a name="CCFulfilmentSubject-get_desc"><strong>get_desc</strong></a>(self, cc: 'str') -&gt; 'Optional[str]'</dt></dl>

<dl><dt><a name="CCFulfilmentSubject-maybe_broadcast"><strong>maybe_broadcast</strong></a>(self, cc: 'str', fulfilment_rate: 'float') -&gt; 'None'</dt><dd><span class="code">Broadcast&nbsp;if&nbsp;fulfillment&nbsp;rate&nbsp;is&nbsp;below&nbsp;threshold.<br>
&nbsp;<br>
Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;cc&nbsp;(str):&nbsp;Community&nbsp;club&nbsp;name.<br>
&nbsp;&nbsp;&nbsp;&nbsp;fulfilment_rate&nbsp;(float):&nbsp;Current&nbsp;fulfillment&nbsp;rate&nbsp;(0.0&nbsp;to&nbsp;1.0).</span></dd></dl>

<dl><dt><a name="CCFulfilmentSubject-notify"><strong>notify</strong></a>(self, cc: 'str') -&gt; 'None'</dt><dd><span class="code">Notify&nbsp;all&nbsp;interested&nbsp;observers.<br>
&nbsp;<br>
Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;cc&nbsp;(str):&nbsp;Community&nbsp;club&nbsp;name.</span></dd></dl>

<dl><dt><a name="CCFulfilmentSubject-register"><strong>register</strong></a>(self, observer: 'IObserver') -&gt; 'None'</dt><dd><span class="code">Register&nbsp;an&nbsp;observer.<br>
&nbsp;<br>
Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;observer&nbsp;(<a href="#IObserver">IObserver</a>):&nbsp;Observer&nbsp;to&nbsp;register.</span></dd></dl>

<dl><dt><a name="CCFulfilmentSubject-set_desc"><strong>set_desc</strong></a>(self, desc: 'str') -&gt; 'None'</dt></dl>

<dl><dt><a name="CCFulfilmentSubject-subscriptions_for_user"><strong>subscriptions_for_user</strong></a>(self, user_email: 'str') -&gt; 'List[IObserver]'</dt></dl>

<dl><dt><a name="CCFulfilmentSubject-unregister"><strong>unregister</strong></a>(self, observer: 'IObserver') -&gt; 'None'</dt><dd><span class="code">Unregister&nbsp;an&nbsp;observer.<br>
&nbsp;<br>
Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;observer&nbsp;(<a href="#IObserver">IObserver</a>):&nbsp;Observer&nbsp;to&nbsp;unregister.</span></dd></dl>

<hr>
Data and other attributes defined here:<br>
<dl><dt><strong>__abstractmethods__</strong> = frozenset()</dl>

<hr>
Data descriptors inherited from <a href="backend.broadcast_observer.html#ISubject">ISubject</a>:<br>
<dl><dt><strong>__dict__</strong></dt>
<dd><span class="code">dictionary&nbsp;for&nbsp;instance&nbsp;variables</span></dd>
</dl>
<dl><dt><strong>__weakref__</strong></dt>
<dd><span class="code">list&nbsp;of&nbsp;weak&nbsp;references&nbsp;to&nbsp;the&nbsp;object</span></dd>
</dl>
</td></tr></table> <p>
<table class="section">
<tr class="decor title-decor heading-text">
<td class="section-title" colspan=3>&nbsp;<br><a name="IObserver">class <strong>IObserver</strong></a>(<a href="abc.html#ABC">abc.ABC</a>)</td></tr>
    
<tr><td class="decor title-decor" rowspan=2><span class="code">&nbsp;&nbsp;&nbsp;</span></td>
<td class="decor title-decor" colspan=2><span class="code">Observer&nbsp;interface&nbsp;for&nbsp;the&nbsp;Observer&nbsp;pattern.<br>&nbsp;</span></td></tr>
<tr><td>&nbsp;</td>
<td class="singlecolumn"><dl><dt>Method resolution order:</dt>
<dd><a href="backend.broadcast_observer.html#IObserver">IObserver</a></dd>
<dd><a href="abc.html#ABC">abc.ABC</a></dd>
<dd><a href="builtins.html#object">builtins.object</a></dd>
</dl>
<hr>
Methods defined here:<br>
<dl><dt><a name="IObserver-is_interested_in"><strong>is_interested_in</strong></a>(self, cc: 'str') -&gt; 'bool'</dt><dd><span class="code">Check&nbsp;if&nbsp;observer&nbsp;is&nbsp;interested&nbsp;in&nbsp;this&nbsp;CC.<br>
&nbsp;<br>
Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;cc&nbsp;(str):&nbsp;Community&nbsp;club&nbsp;name.<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;bool:&nbsp;True&nbsp;if&nbsp;interested&nbsp;in&nbsp;notifications&nbsp;for&nbsp;this&nbsp;CC.</span></dd></dl>

<dl><dt><a name="IObserver-update"><strong>update</strong></a>(self, cc: 'str') -&gt; 'None'</dt><dd><span class="code">Called&nbsp;by&nbsp;Subject&nbsp;when&nbsp;notification&nbsp;needed.<br>
&nbsp;<br>
Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;cc&nbsp;(str):&nbsp;Community&nbsp;club&nbsp;name.</span></dd></dl>

<hr>
Data descriptors defined here:<br>
<dl><dt><strong>__dict__</strong></dt>
<dd><span class="code">dictionary&nbsp;for&nbsp;instance&nbsp;variables</span></dd>
</dl>
<dl><dt><strong>__weakref__</strong></dt>
<dd><span class="code">list&nbsp;of&nbsp;weak&nbsp;references&nbsp;to&nbsp;the&nbsp;object</span></dd>
</dl>
<hr>
Data and other attributes defined here:<br>
<dl><dt><strong>__abstractmethods__</strong> = frozenset({'is_interested_in', 'update'})</dl>

</td></tr></table> <p>
<table class="section">
<tr class="decor title-decor heading-text">
<td class="section-title" colspan=3>&nbsp;<br><a name="ISubject">class <strong>ISubject</strong></a>(<a href="abc.html#ABC">abc.ABC</a>)</td></tr>
    
<tr><td class="decor title-decor" rowspan=2><span class="code">&nbsp;&nbsp;&nbsp;</span></td>
<td class="decor title-decor" colspan=2><span class="code">Subject&nbsp;interface&nbsp;for&nbsp;the&nbsp;Observer&nbsp;pattern.<br>&nbsp;</span></td></tr>
<tr><td>&nbsp;</td>
<td class="singlecolumn"><dl><dt>Method resolution order:</dt>
<dd><a href="backend.broadcast_observer.html#ISubject">ISubject</a></dd>
<dd><a href="abc.html#ABC">abc.ABC</a></dd>
<dd><a href="builtins.html#object">builtins.object</a></dd>
</dl>
<hr>
Methods defined here:<br>
<dl><dt><a name="ISubject-get_desc"><strong>get_desc</strong></a>(self, cc: 'str') -&gt; 'Optional[str]'</dt></dl>

<dl><dt><a name="ISubject-notify"><strong>notify</strong></a>(self, cc: 'str') -&gt; 'None'</dt><dd><span class="code">Notify&nbsp;all&nbsp;interested&nbsp;observers.<br>
&nbsp;<br>
Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;cc&nbsp;(str):&nbsp;Community&nbsp;club&nbsp;name.</span></dd></dl>

<dl><dt><a name="ISubject-register"><strong>register</strong></a>(self, observer: 'IObserver') -&gt; 'None'</dt><dd><span class="code">Register&nbsp;an&nbsp;observer.<br>
&nbsp;<br>
Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;observer&nbsp;(<a href="#IObserver">IObserver</a>):&nbsp;Observer&nbsp;to&nbsp;register.</span></dd></dl>

<dl><dt><a name="ISubject-set_desc"><strong>set_desc</strong></a>(self, desc: 'str') -&gt; 'None'</dt></dl>

<dl><dt><a name="ISubject-unregister"><strong>unregister</strong></a>(self, observer: 'IObserver') -&gt; 'None'</dt><dd><span class="code">Unregister&nbsp;an&nbsp;observer.<br>
&nbsp;<br>
Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;observer&nbsp;(<a href="#IObserver">IObserver</a>):&nbsp;Observer&nbsp;to&nbsp;unregister.</span></dd></dl>

<hr>
Data descriptors defined here:<br>
<dl><dt><strong>__dict__</strong></dt>
<dd><span class="code">dictionary&nbsp;for&nbsp;instance&nbsp;variables</span></dd>
</dl>
<dl><dt><strong>__weakref__</strong></dt>
<dd><span class="code">list&nbsp;of&nbsp;weak&nbsp;references&nbsp;to&nbsp;the&nbsp;object</span></dd>
</dl>
<hr>
Data and other attributes defined here:<br>
<dl><dt><strong>__abstractmethods__</strong> = frozenset({'get_desc', 'notify', 'register', 'set_desc', 'unregister'})</dl>

</td></tr></table> <p>
<table class="section">
<tr class="decor title-decor heading-text">
<td class="section-title" colspan=3>&nbsp;<br><a name="SubscriptionObserver">class <strong>SubscriptionObserver</strong></a>(<a href="backend.broadcast_observer.html#IObserver">IObserver</a>)</td></tr>
    
<tr><td class="decor title-decor" rowspan=2><span class="code">&nbsp;&nbsp;&nbsp;</span></td>
<td class="decor title-decor" colspan=2><span class="code"><a href="#SubscriptionObserver">SubscriptionObserver</a>(<br>
&nbsp;&nbsp;&nbsp;&nbsp;user_email:&nbsp;'str',<br>
&nbsp;&nbsp;&nbsp;&nbsp;cc:&nbsp;'str',<br>
&nbsp;&nbsp;&nbsp;&nbsp;_subject:&nbsp;'<a href="#ISubject">ISubject</a>',<br>
&nbsp;&nbsp;&nbsp;&nbsp;_notification_strategy:&nbsp;'DatabaseNotificationStrategy'&nbsp;=&nbsp;&amp;lt;backend.services.notification_strategies.DatabaseNotificationStrategy&nbsp;object&nbsp;at&nbsp;0x000001BBC202FB60&amp;gt;<br>
)&nbsp;-&amp;gt;&nbsp;None<br>
&nbsp;<br>
Observer&nbsp;for&nbsp;user&nbsp;subscription&nbsp;to&nbsp;CC&nbsp;broadcasts.<br>
&nbsp;<br>
Represents&nbsp;ONE&nbsp;subscription&nbsp;(user_email&nbsp;+&nbsp;cc).<br>
Uses&nbsp;pull&nbsp;model:&nbsp;when&nbsp;<a href="#SubscriptionObserver-update">update</a>()&nbsp;is&nbsp;called,&nbsp;it&nbsp;pulls&nbsp;subject.get_desc(cc).<br>&nbsp;</span></td></tr>
<tr><td>&nbsp;</td>
<td class="singlecolumn"><dl><dt>Method resolution order:</dt>
<dd><a href="backend.broadcast_observer.html#SubscriptionObserver">SubscriptionObserver</a></dd>
<dd><a href="backend.broadcast_observer.html#IObserver">IObserver</a></dd>
<dd><a href="abc.html#ABC">abc.ABC</a></dd>
<dd><a href="builtins.html#object">builtins.object</a></dd>
</dl>
<hr>
Methods defined here:<br>
<dl><dt><a name="SubscriptionObserver-__delattr__"><strong>__delattr__</strong></a>(self, name)</dt><dd><span class="code">Implement&nbsp;delattr(self,&nbsp;name).</span></dd></dl>

<dl><dt><a name="SubscriptionObserver-__eq__"><strong>__eq__</strong></a>(self, other)</dt><dd><span class="code">Return&nbsp;self==value.</span></dd></dl>

<dl><dt><a name="SubscriptionObserver-__hash__"><strong>__hash__</strong></a>(self)</dt><dd><span class="code">Return&nbsp;hash(self).</span></dd></dl>

<dl><dt><a name="SubscriptionObserver-__init__"><strong>__init__</strong></a>(
    self,
    user_email: 'str',
    cc: 'str',
    _subject: 'ISubject',
    _notification_strategy: 'DatabaseNotificationStrategy' = &lt;backend.services.notification_strategies.DatabaseNotificationStrategy object at 0x000001BBC202FB60&gt;
) -&gt; None</dt><dd><span class="code">Initialize&nbsp;self.&nbsp;&nbsp;See&nbsp;help(type(self))&nbsp;for&nbsp;accurate&nbsp;signature.</span></dd></dl>

<dl><dt><a name="SubscriptionObserver-__replace__"><strong>__replace__</strong></a> = _replace(self, /, **changes)<span class="grey"><span class="heading-text"> from <a href="dataclasses.html">dataclasses</a></span></span></dt></dl>

<dl><dt><a name="SubscriptionObserver-__repr__"><strong>__repr__</strong></a>(self)</dt><dd><span class="code">Return&nbsp;repr(self).</span></dd></dl>

<dl><dt><a name="SubscriptionObserver-__setattr__"><strong>__setattr__</strong></a>(self, name, value)</dt><dd><span class="code">Implement&nbsp;setattr(self,&nbsp;name,&nbsp;value).</span></dd></dl>

<dl><dt><a name="SubscriptionObserver-is_interested_in"><strong>is_interested_in</strong></a>(self, cc)</dt><dd><span class="code">Check&nbsp;if&nbsp;observer&nbsp;is&nbsp;interested&nbsp;in&nbsp;this&nbsp;CC.<br>
&nbsp;<br>
Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;cc&nbsp;(str):&nbsp;Community&nbsp;club&nbsp;name.<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;bool:&nbsp;True&nbsp;if&nbsp;interested&nbsp;in&nbsp;notifications&nbsp;for&nbsp;this&nbsp;CC.</span></dd></dl>

<dl><dt><a name="SubscriptionObserver-update"><strong>update</strong></a>(self, cc: 'str') -&gt; 'None'</dt><dd><span class="code">Called&nbsp;by&nbsp;Subject&nbsp;when&nbsp;notification&nbsp;needed.<br>
&nbsp;<br>
Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;cc&nbsp;(str):&nbsp;Community&nbsp;club&nbsp;name.</span></dd></dl>

<hr>
Data and other attributes defined here:<br>
<dl><dt><strong>__abstractmethods__</strong> = frozenset()</dl>

<dl><dt><strong>__annotations__</strong> = {'_notification_strategy': 'DatabaseNotificationStrategy', '_subject': 'ISubject', 'cc': 'str', 'user_email': 'str'}</dl>

<dl><dt><strong>__dataclass_fields__</strong> = {'_notification_strategy': Field(name='_notification_strategy',type='Databa...appingproxy({}),kw_only=False,_field_type=_FIELD), '_subject': Field(name='_subject',type='ISubject',default=&lt;d...appingproxy({}),kw_only=False,_field_type=_FIELD), 'cc': Field(name='cc',type='str',default=&lt;dataclasses....appingproxy({}),kw_only=False,_field_type=_FIELD), 'user_email': Field(name='user_email',type='str',default=&lt;data...appingproxy({}),kw_only=False,_field_type=_FIELD)}</dl>

<dl><dt><strong>__dataclass_params__</strong> = _DataclassParams(init=True,repr=True,eq=True,ord...rue,kw_only=False,slots=False,weakref_slot=False)</dl>

<dl><dt><strong>__match_args__</strong> = ('user_email', 'cc', '_subject', '_notification_strategy')</dl>

<hr>
Data descriptors inherited from <a href="backend.broadcast_observer.html#IObserver">IObserver</a>:<br>
<dl><dt><strong>__dict__</strong></dt>
<dd><span class="code">dictionary&nbsp;for&nbsp;instance&nbsp;variables</span></dd>
</dl>
<dl><dt><strong>__weakref__</strong></dt>
<dd><span class="code">list&nbsp;of&nbsp;weak&nbsp;references&nbsp;to&nbsp;the&nbsp;object</span></dd>
</dl>
</td></tr></table></td></tr></table><p>
<table class="section">
<tr class="decor data-decor heading-text">
<td class="section-title" colspan=3>&nbsp;<br><strong class="bigsection">Data</strong></td></tr>
    
<tr><td class="decor data-decor"><span class="code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></td><td>&nbsp;</td>
<td class="singlecolumn"><strong>List</strong> = typing.List<br>
<strong>Optional</strong> = typing.Optional<br>
<strong>db</strong> = &lt;SQLAlchemy&gt;<br>
<strong>subject</strong> = &lt;backend.broadcast_observer.CCFulfilmentSubject object&gt;</td></tr></table>
</body></html>